class ChatEngine{constructor(e,s){this.chatBox=$(`#${e}`),this.userEmail=s,this.socket=io.connect("http://localhost:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e,s=this;this.socket.on("connect",(()=>{console.log("connection established using sockets...!"),document.querySelectorAll(".chat-button").forEach((t=>{t.addEventListener("click",(n=>{let o=t.getAttribute("data-id"),i=s.userEmail;e=o<i?`${o}-${i}`:`${i}-${o}`,s.socket.emit("join_room",{user_email:i,chatroom:e}),document.getElementById("friend-name").innerHTML=`${o}`}))})),s.socket.on("user_joined",(e=>{console.log("a user joined",e)}))})),$("#send-msg").click((function(t){t.preventDefault();let n=$("#chat-input").val();""!=n&&s.socket.emit("send_message",{message:n,user_email:s.userEmail,chatroom:e})})),s.socket.on("receive_message",(e=>{console.log("message received",e.message);let t="";t=e.user_email==s.userEmail?`<div class="line-self">\n                                    <div class="self">\n                                        ${e.message}\n                                    </div>\n                                </div>`:`<div class="line-other">\n                                    <div class="other">\n                                        ${e.message}\n                                    </div>\n                                </div>`,document.getElementById("message").innerHTML+=t}))}}